<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Instalaci√≥n</title>

		<link rel="stylesheet" href="../../dist/reset.css">
		<link rel="stylesheet" href="../../dist/reveal.css">
		<link rel="stylesheet" href="../../dist/theme/black.css">

		<!-- Theme used for syntax highlighted code -->
		<link rel="stylesheet" href="../../plugin/highlight/monokai.css">
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<h1>Instalaci√≥n</h1>
					<ul>
						<li>Instalaci√≥n en local</li>
						<li>Instalaci√≥n de un cluster</li>
						<li>Servicios gestionados</li>
					</ul>
					<aside class="notes" data-markdown>
						=== Instalaci√≥n en local
						Veremos varios m√©todos de instalaci√≥n en local, aunque solo
						utilizaremos uno: minikube + Hyperv en windows
						o minikube + VirtualBox en linux.

						=== Instalaci√≥n en cluster
						En este curso no se entra en los detalles de la instalaci√≥n del cluster.

						=== Servicios gestionados
						En esta secci√≥n hablaremos de qu√© son, sus ventajas e inconvenientes.
						Durante el curso utilizaremos Google Kubernetes Engine como proveedor de cluster
						de Kubernetes gestionado.
					</aside>
				</section>
				<section>
					<h1>Instalaci√≥n en local</h1>
					<ul>
						<li><a href="https://minikube.sigs.k8s.io/docs/" target="_blank" rel="noopener noreferrer">Minikube</a></li>
						<li><a href="https://k3d.io/" target="_blank" rel="noopener noreferrer">k3d</a></li>
						<li><a href="https://kind.sigs.k8s.io/" target="_blank" rel="noopener noreferrer">KinD</a></li>
					</ul>
					<aside class="notes" data-markdown>
						Dentro de los flujos de trabajo de un equipo de desarrollo, el disponer de un
						cluster local de Kubernetes es fundamental para poder hacer pruebas. A no 
						ser que el equipo trabaje con herramientas de desarrollo que se alojen √∫nicamente en 
						la nube, el uso de un kubernetes en local facilitar√° a los miembros de nuestro equipo
						un mecanismo para realizar tareas como:
						* probar la aplicaci√≥n
						* probar nuevas herramientas
						* probar procesos de despliegue e intregraci√≥n cont√≠nua
						  desde su propia m√°quina.
					</aside>
				</section>
				<section>
					<section>
						<h1>Gestionar nuestro cluster</h1>

						<ul>
							<li>Instalaci√≥n de un cluster desde cero (<a href="https://github.com/kelseyhightower/kubernetes-the-hard-way" target="_blank" rel="noopener noreferrer">Kubernetes the hard way</a>)</li>
							<li>Nubes privadas como <a href="https://cloud.redhat.com/learn/topics/kubernetes/" target="_blank" rel="noopener noreferrer">OpenShift</a></li>
							<li><a href="https://k3s.io/" target="_blank" rel="noopener noreferrer">k3s</a></li>
						</ul>	
					</section>
					<section>
					
						<ul>
							<li>üí∞ Coste de infraestructura</li>
							<li>
								üí∞ Coste de mantenimiento de infraestructura y mantenimiento de software
								<ul>
									<li>üß® Red</li>
									<li>üß® Sistemas de ficheros</li>
									<li>üß® Incompatibilidades entre componentes, kernels, versiones de kubernetes</li>
									<li>üß® Operators</li>
									<li>‚ôªÔ∏è Actualizaciones</li>
								</ul>
							</li>
							<li>üîí Impacto en la seguridad (aumento de los vectores de ataque)</li>

						</ul>

						<aside class="notes" data-markdown>
							Kubernetes no es m√°s que una aplicaci√≥n que se instala en un cluster ¬°Siempre podemos hacerlo nosotros!	

							Sin embargo, es necesario tener un buen motivo para hacerlo. Algunos casos de uso:

							* Si la entidad ya gestiona clusters de tama√±o considerable, ser√° mucho m√°s barato y, adem√°s,
							  ya se dispondr√° de las personas que puedan encargarse de gestionar este tipo de infraestructura.
							* Baja latencia: si entre tus requisitos est√° una baja latencia de comunicaci√≥n entre nodos, el uso
							  de clusters gestionados puede no ser una opci√≥n (normalmente utilizan m√°quinas virtuales con una 
								latencia superior a la de las m√°quinas f√≠sicas)
							* Motivos legales: la regulaci√≥n existente puede impedirte alojar tu cluster en un servicio gestionado
							* Necesitas control completo sobre el hardware: los proveedores de servicios gestionados suelen dar bastante
							  control sobre el hardware, pero no todo. Si el proyecto require del uso de hardware muy espec√≠fico o necesitamos
								poder configurarlo de una determinada manera, montar nuestro proppio cluster puede ser una soluci√≥n.
				
							¬øPor qu√©? Porque la gesti√≥n de un cluster de Kubernetes implica todo lo expuesto en esta diapositiva.
							No se recomienda gestionar un cluster a no ser que el equipo sea capaz de resolver incidencias a distintos
							niveles del stack, desde la gesti√≥n del hardware, gesti√≥n de redes y administraci√≥n del sistema operativo 
							a bajo nivel hasta la administraci√≥n del propio Kubernetes.
						</aside>
					</section>
					<section>
						<h1>üõ†Ô∏è Herramientas</h1>
						<ul>
							<li><a href="https://kubespray.io/#/" target="_blank" rel="noopener noreferrer">kubespray</a></li>
							<li><a href="https://rancher.com/docs/rke/latest/en/" target="_blank" rel="noopener noreferrer">rke</a></li>
							<li><a href="https://github.com/kinvolk/bootkube" target="_blank" rel="noopener noreferrer"></a>bootkube</li>

						</ul>
						<aside class="notes" data-markdown>
							Algunas herramientas que pueden ayudarnos para instalar nuestro propio cluster.

							No usaremos ninguna en el curso. Utilizaremos un servicio gestionado.

							* kubespray: basado en Ansible, permite instalar un cluster en m√°quinas virtuales y f√≠sicas
							* rke: se ejecuta sobre contenedores de docker
							* bootkube: ejecuta el `control-plane` de kubernetes dentro de kubernetes (api-server, 
							  controller-manager y scheduler). Ventaja: parte de kubernetes se puede gestionar usando
							  el comando `kubectl`, como si fuesen pods
						</aside>
					</section>
					<section>
						<h1>k3s</h1>
						<ul>
							<li><em>lightweigth kubernetes</em></li>
							<li>Dise√±ado para iOt y Edge computing</li>
							<li>Un solo ejecutable (&lt;50MB) que contiene la implementaci√≥n de kubernetes</li>
						</ul>
						<aside class="notes" data-markdown>
							Una herramienta muy interesante que me gustar√≠a mencionar es k3s. 

							* Distribuci√≥n certificada
							* Listo para producci√≥n
							* Pensado para m√°quinas con recursos limitados
							* Optimizado para ARM64 y ARMv7
							* ¬øC√≥mo consiguen meter kubernetes en 50MB? quitando funcionalidades en deshuso, en beta o en alfa,

							¬°Es algo que puedes montar en tu casa con tres RaspberryPi!

							Ideal para trastear con c√≥mo funciona un cluster de kubernetes, pero ¬°cuidad! que mis palabras
							no te confundan: es un proyecto pensado para desplegar en producci√≥n.
						</aside>
					</section>
				</section>
				<section>
					<h1>Servicios gestionados</h1>
					<ul>
						<li><a href="https://aws.amazon.com/kubernetes/" target="_blank" rel="noopener noreferrer">AWS</a></li>
						<li><a href="https://azure.microsoft.com/es-es/services/kubernetes-service/#overview" target="_blank" rel="noopener noreferrer">Azure (AKS)</a></li>
						<li><a href="https://cloud.google.com/kubernetes-engine/" target="_blank" rel="noopener noreferrer">Google (GKE)</a></li>
						<li><a href="https://www.digitalocean.com/products/kubernetes/" target="_blank" rel="noopener noreferrer">Digital Ocean</a></li>
						<li><a href="https://www.ovhcloud.com/en/public-cloud/kubernetes/" target="_blank" rel="noopener noreferrer">OVH</a></li>
						<li><a href="https://empresas.arsys.es/devops" target="_blank" rel="noopener noreferrer">Arsys</a></li>
					</ul>
					<aside class="notes" data-markdown>
						A d√≠a de hoy, son muchos los proveedores de servicios en la nube que ofrecen
						clusters gestionados de Kubernetes.

						No voy a entrar en los detalles de cada uno de ellos. Durante el curso
						utilizaremos Digital Ocean o Google Kubernetes Engine para hacer parte de los
						laboratorios/ejercicios. El motivo es:
						* Digital Ocean por su simplicidad y coste
						* Google Kubernetes Engine, aparte de ser el lugar en el que se empez√≥ el desarrollo de 
						  Kubernetes, por que ofrece la posibilidad de disponer de un cr√©dito
						  de 300$ para experimentar
					</aside>
				</section>
				<section>
					<h1>Taller</h1>
					<h2>Instalaci√≥n de Minikube</h2>

					* Windows: minikube + hyperv
					* Linux: minikube + docker
					* (tambi√©n se puede instalar en MacOS. No lo haremos en el curso)
				</section>
			</div>
		</div>

		<script src="../../dist/reveal.js"></script>
		<script src="../../plugin/notes/notes.js"></script>
		<script src="../../plugin/markdown/markdown.js"></script>
		<script src="../../plugin/highlight/highlight.js"></script>
		<script>
			// More info about initialization & config:
			// - https://revealjs.com/initialization/
			// - https://revealjs.com/config/
			Reveal.initialize({
				hash: true,

				// Learn about plugins: https://revealjs.com/plugins/
				plugins: [ RevealMarkdown, RevealHighlight, RevealNotes ]
			});
		</script>
	</body>
</html>
